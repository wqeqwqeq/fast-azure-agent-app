<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenericAI</title>
    <!-- CSS Modules -->
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/sidebar.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/messages.css">
    <link rel="stylesheet" href="/static/css/input.css">
    <link rel="stylesheet" href="/static/css/thinking.css">
    <link rel="stylesheet" href="/static/css/evaluation.css">
    <link rel="stylesheet" href="/static/css/responsive.css">
</head>

<body>

    <!-- Global Sidebar Toggle -->
    <input type="checkbox" id="sidebar-toggle">

    <!-- SIDEBAR -->
    <aside class="sidebar">

        <div class="sidebar-header">
            <div class="brand-logo">
                <svg class="icon" viewBox="0 0 24 24" style="stroke-width: 1.5;">
                    <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z" fill="none"
                        stroke="none"></path>
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 8a4 4 0 1 0 4 4 4 4 0 0 0-4-4z"></path>
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 2c1.5 0 2.9.4 4.1 1.1L9.8 16.5c-1.8-1-3-2.9-3-5.1 0-2.4 1.4-4.5 3.5-5.5.5-.1 1.1-.2 1.7-.2zm0 16c-1.5 0-2.9-.4-4.1-1.1l6.3-11.4c1.8 1 3 2.9 3 5.1 0 2.4-1.4 4.5-3.5 5.5-.5.1-1.1.2-1.7.2z"
                        fill="currentColor" stroke="none"></path>
                </svg>
            </div>
            <label for="sidebar-toggle" class="sidebar-toggle-btn">
                <svg class="icon" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="9" y1="3" x2="9" y2="21"></line>
                </svg>
            </label>
        </div>

        <div class="nav-section">
            <div class="nav-item" id="new-chat-btn">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                <span class="nav-text">New chat</span>
            </div>
            <div class="nav-item" id="search-chats-btn">
                <svg class="icon" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <span class="nav-text">Search chats</span>
            </div>
        </div>

        <div class="chat-history-container">
            <details class="chats-group" open>
                <summary class="chats-summary">
                    Chats
                    <svg class="icon icon-xs chevron-icon" viewBox="0 0 24 24">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </summary>

                <div class="chat-list" id="chat-list">
                    <!-- Chat items will be dynamically rendered here -->
                </div>
            </details>
        </div>

        <div class="user-profile">
            <div class="avatar" id="user-avatar">?</div>
            <div class="user-info">
                <span class="user-name" id="user-name">Loading...</span>
                <span class="user-tag" id="user-tag"></span>
            </div>
        </div>
    </aside>

    <!-- MAIN AREA -->
    <main class="main-area">
        <!-- Main content wrapper (allows flyout sidebar to sit alongside) -->
        <div class="main-content">
            <div class="top-bar">
                <label for="sidebar-toggle" class="main-toggle-btn">
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="9" y1="3" x2="9" y2="21"></line>
                    </svg>
                </label>

                <!-- Model Selector Container -->
                <div class="model-selector-container" id="model-selector-container">
                    <!-- Trigger Button -->
                    <button class="model-trigger" id="model-trigger-btn">
                        <span id="current-model-display">ChatGPT</span> <span class="version"
                            id="current-model-version">4o-mini</span>
                        <svg class="icon icon-sm" viewBox="0 0 24 24"
                            style="stroke-width:3; width:14px; height:14px; margin-left:4px;">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>

                    <!-- Menu -->
                    <div class="model-menu" id="model-menu">
                        <!-- Model options will be dynamically rendered here -->
                    </div>
                </div>
            </div>

            <div class="chat-canvas" id="chat-canvas">
                <!-- Content will be dynamically rendered here -->
            </div>
        </div>
        <!-- Thinking flyout will be appended here by JavaScript -->
    </main>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

    <!-- JavaScript Modules (order matters for dependencies) -->
    <script src="/static/js/state.js"></script>
    <script src="/static/js/utils.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/thinking.js"></script>
    <script src="/static/js/evaluation.js"></script>
    <script src="/static/js/handlers.js"></script>
    <script src="/static/js/main.js"></script>
</body>

</html>
